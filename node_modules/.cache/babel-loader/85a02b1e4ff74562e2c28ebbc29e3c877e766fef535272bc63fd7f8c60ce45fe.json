{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport menuDataAdmin from './routerData.js';\nimport { menuDataUser } from './routerData.js';\nexport default {\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    onSubmit() {\n      console.log(\"=========login\", this.form);\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          //接口返回true则跳转，否则提示错误\n          if (this.form.username == 'admin' || this.form.username == 'user') {\n            //请求后端登录接口获取token\n            const token = Math.round(Math.random() * (100000000 - 10000000)) + 100000000;\n            localStorage.setItem(\"token\", token);\n            // localStorage.setItem('username',this.form.username)\n\n            if (this.form.username == 'admin') this.$store.commit('setMenu', menuDataAdmin.menuDataAdmin);else this.$store.commit('setMenu', menuDataUser);\n            this.$router.push({\n              name: 'home'\n            });\n          } else this.$message.error(\"用户名或密码错误\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["menuDataAdmin","menuDataUser","data","form","username","password","rules","required","message","trigger","methods","onSubmit","console","log","$refs","validate","valid","token","Math","round","random","localStorage","setItem","$store","commit","$router","push","name","$message","error"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"login-header\">\r\n            <div class=\"header-content\">通用后台管理系统</div>\r\n        </div>\r\n        <div class=\"login-content\">\r\n            <div class=\"login-left\"></div>\r\n            <div class=\"login-right\">\r\n                <div class=\"right-content\">\r\n                    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n                        <el-form-item label=\"用户名\" prop=\"username\">\r\n                            <el-input v-model=\"form.username\" placeholder=\"用户名为admin/user\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"密码\" prop=\"password\">\r\n                            <el-input v-model=\"form.password\" type=\"password\"  @keyup.enter=\"onSubmit\" placeholder=\"密码无校验\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item>\r\n                            <el-button style=\"width: 100%;\" type=\"primary\" @click=\"onSubmit\">登录</el-button>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport menuDataAdmin from './routerData.js'\r\nimport {menuDataUser} from './routerData.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            form: {\r\n                username: \"\",\r\n                password: \"\"\r\n            },\r\n            rules: {\r\n                username: [\r\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n                ],\r\n                password: [{ required: true, message: \"请输入密码\", trigger: \"blur\" }],\r\n            },\r\n        }\r\n    },\r\n    methods:{\r\n        onSubmit(){\r\n            console.log(\"=========login\",this.form)\r\n            this.$refs.form.validate((valid)=>{\r\n                if(valid){\r\n                    \r\n                    //接口返回true则跳转，否则提示错误\r\n                    if(this.form.username=='admin'||this.form.username=='user'){\r\n                        //请求后端登录接口获取token\r\n                        const token=Math.round(Math.random()*(100000000-10000000))+100000000;\r\n                        localStorage.setItem(\"token\",token);\r\n                        // localStorage.setItem('username',this.form.username)\r\n                        \r\n                        if(this.form.username=='admin') this.$store.commit('setMenu',menuDataAdmin.menuDataAdmin)\r\n                        else this.$store.commit('setMenu',menuDataUser)\r\n                        this.$router.push({name:'home'})\r\n                    }                   \r\n                    else\r\n                        this.$message.error(\"用户名或密码错误\")\r\n                }\r\n            })\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.main{\r\n    margin: 0;\r\n    padding: 0;\r\n    background-image: url(../assets/image/login.png);\r\n    width: 100%;\r\n    height: 100%;\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n    position: relative;\r\n}\r\n.login-header{\r\n    width: 100%;\r\n    height: 300px;\r\n    .header-content{\r\n        position: absolute;\r\n        left: 40%;\r\n        top: 25%;\r\n        color: #fff;\r\n        font-size: 36px;\r\n        font-weight: bold;\r\n    }\r\n}\r\n.login-content{\r\n    width: 100%;\r\n    height: 500px;\r\n    .login-left{\r\n        // width: 30%;\r\n        // height: 100%;\r\n    }\r\n    .login-right{\r\n       .right-content{\r\n        position: absolute;\r\n        left: 55%;\r\n        top: 60%;\r\n        width: 25%;\r\n        .el-button{\r\n            background-image: linear-gradient(to right, #c3e3f8, #095ba0);\r\n        }\r\n       }\r\n    }\r\n}\r\n</style>"],"mappings":";AA2BA,OAAAA,aAAA;AACA,SAAAC,YAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,QAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,SAAA;MACAC,OAAA,CAAAC,GAAA,wBAAAV,IAAA;MACA,KAAAW,KAAA,CAAAX,IAAA,CAAAY,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UAEA;UACA,SAAAb,IAAA,CAAAC,QAAA,oBAAAD,IAAA,CAAAC,QAAA;YACA;YACA,MAAAa,KAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,MAAA;YACAC,YAAA,CAAAC,OAAA,UAAAL,KAAA;YACA;;YAEA,SAAAd,IAAA,CAAAC,QAAA,kBAAAmB,MAAA,CAAAC,MAAA,YAAAxB,aAAA,CAAAA,aAAA,OACA,KAAAuB,MAAA,CAAAC,MAAA,YAAAvB,YAAA;YACA,KAAAwB,OAAA,CAAAC,IAAA;cAAAC,IAAA;YAAA;UACA,OAEA,KAAAC,QAAA,CAAAC,KAAA;QACA;MACA;IAEA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}